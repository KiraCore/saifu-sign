version: 1
frontend:
  phases:
    build:
      commands: [
          "echo 'Starting SAIFU SIGN build v0.0.1'",
          "printenv",
          "cd $CODEBUILD_SRC_DIR/saifu-sign/src && ls -a",
          "flutter pub get", 
          "flutter build web --release",
          "rm -fvr /html && mkdir -p /html",
          "cp -rfv $CODEBUILD_SRC_DIR/saifu-sign/src/build/web/. /html",
          "rm -rfv $CODEBUILD_SRC_DIR/saifu-sign && mkdir -p $CODEBUILD_SRC_DIR/saifu-sign",
          "cp -rfv /html/. $CODEBUILD_SRC_DIR/saifu-sign",
          "cd $CODEBUILD_SRC_DIR/saifu-sign && ls -a",
          "echo 'Finished SAIFU SIGN build v0.0.1'"
          ]
  artifacts:
    baseDirectory: /
    files:
      - '**/*'
  cache:
    paths: []
